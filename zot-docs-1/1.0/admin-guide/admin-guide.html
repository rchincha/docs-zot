<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Zot Administrator Guide :: Zot Docs</title>
    <meta name="generator" content="Antora 3.0.1">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
    <link rel="icon" href="../../../favicon.ico" type="image/x-icon">  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item navbar-logo" href="../../.."></a>
      <a class="navbar-item" href="../../..">Zot Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://zotregistry.io/">Home</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="zot-docs-1" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../toc/zot-toc.html">Zot Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../toc/zot-toc.html">Documentation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">General</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../general/zot-concepts.html">Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../general/artifacts.html">Released Artifacts for zot</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">User Guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user-guides/user-guide-datapath.html">Push and Pull Image Content</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="admin-guide.html">Zot Administrator Guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../developer-guide/developer-guide.html">Zot Developer Guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Installation Guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../install-guides/install-guide-linux.html">Installing zot on Bare Metal Linux</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../install-guides/install-guide-k8s.html">Installing zot with Kubernetes and Helm</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Articles</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kb/building-ci-cd-pipeline.html">Building an OCI-native Container Image CI/CD Pipeline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kb/authn-authz.html">User Authentication and Authorization with zot</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kb/security-posture.html">zot Security Posture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kb/storage.html">Storage Planning with zot</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kb/clustering.html">zot Clustering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kb/benchmarking-with-zb.html">Benchmarking zot with zb</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Zot Documentation</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../toc/zot-toc.html">Zot Documentation</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../toc/zot-toc.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../toc/zot-toc.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../toc/zot-toc.html">Zot Documentation</a></li>
    <li><a href="admin-guide.html">Zot Administrator Guide</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Zot Administrator Guide</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Revised: 2022-08-09</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started"><a class="anchor" href="#_getting_started"></a><a class="link" href="#_getting_started">Getting started</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_how_to_get_zot"><a class="anchor" href="#_how_to_get_zot"></a><a class="link" href="#_how_to_get_zot">How to get zot</a></h3>
<div class="paragraph">
<p>The zot project is hosted on GitHub at <a href="https://github.com/project-zot/zot">project-zot</a>. From GitHub, you can download zot executable binary images or full source code.</p>
</div>
<div class="sect3">
<h4 id="_supported_platforms"><a class="anchor" href="#_supported_platforms"></a><a class="link" href="#_supported_platforms">Supported platforms</a></h4>
<div class="paragraph">
<p>Zot is officially supported on Linux and Apple MacOS platforms, using Intel or ARM processors. However, development should be possible on any platform that supports the <code>golang</code> toolchain.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 1. Supported platforms and architectures</caption>
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">OS</th>
<th class="tableblock halign-left valign-top">ARCH</th>
<th class="tableblock halign-left valign-top">Platform</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">linux</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">amd64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intel-based Linux servers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">linux</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">arm64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ARM-based servers and Raspberry Pi4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">darwin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">amd64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intel-based MacOS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">darwin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">arm64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ARM-based MacOS</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_about_binary_images"><a class="anchor" href="#_about_binary_images"></a><a class="link" href="#_about_binary_images">About binary images</a></h4>
<div class="paragraph">
<p>Executable binary zot images are available for multiple platforms and architectures and with full or minimal implementations.</p>
</div>
<div class="paragraph">
<p>Refer to <a href="../general/artifacts.html" class="xref page"><em>Released Artifacts for zot</em></a> for information about available zot images along with information about image variations, image locations, and image naming formats.</p>
</div>
</div>
<div class="sect3">
<h4 id="_deployment_methods"><a class="anchor" href="#_deployment_methods"></a><a class="link" href="#_deployment_methods">Deployment methods</a></h4>
<div class="paragraph">
<p>Several options exist for deploying zot:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can launch a zot binary as a container service using a container management tool such as Podman, Docker, or Helm.</p>
</li>
<li>
<p>You can launch zot as a host-level service by downloading a binary image and running it as a systemd service.</p>
</li>
<li>
<p>You can copy or clone the full zot source code and build an image with custom build flags.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deploying_a_zot_binary_image"><a class="anchor" href="#_deploying_a_zot_binary_image"></a><a class="link" href="#_deploying_a_zot_binary_image">Deploying a zot binary image</a></h3>
<div class="paragraph">
<p>Executable binary images for supported server platforms and architectures are available from the <a href="https://github.com/orgs/project-zot/packages?repo_name=zot">zot package repository</a> in GitHub.</p>
</div>
<div class="paragraph">
<p>You can download the appropriate binary image and run it directly on your server, or you can use a container management tool such as Podman, runc, Helm, or Docker to fetch and deploy the image in a container on your server.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For convenience, you can rename the binary image file to simply <code>zot.</code>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_example_deploying_with_a_container_manager"><a class="anchor" href="#_example_deploying_with_a_container_manager"></a><a class="link" href="#_example_deploying_with_a_container_manager">Example: Deploying with a container manager</a></h4>
<div class="paragraph">
<p>Using a container manager such as Podman, runc, Helm, or Docker, you can install a zot binary image, as in the following examples.</p>
</div>
<div class="listingblock">
<div class="title">Using Podman</div>
<div class="content">
<pre>podman run -p 5000:5000 ghcr.io/project-zot/zot-linux-amd64:latest</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>podman run -p 5000:5000 ghcr.io/project-zot/zot-linux-amd64-minimal:latest</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Using Docker</div>
<div class="content">
<pre>docker run -p 5000:5000 ghcr.io/project-zot/zot-linux-amd64:latest</pre>
</div>
</div>
<div class="paragraph">
<p>Each of these example commands pulls a zot binary image from the GitHub Container Registry (ghcr.io) and launches a zot image registry at <a href="http://localhost:5000" class="bare">http://localhost:5000</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_building_zot_from_source"><a class="anchor" href="#_building_zot_from_source"></a><a class="link" href="#_building_zot_from_source">Building zot from source</a></h3>
<div class="sect3">
<h4 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a><a class="link" href="#_prerequisites">Prerequisites</a></h4>
<div class="sect4">
<h5 id="_install_golang_1_17"><a class="anchor" href="#_install_golang_1_17"></a><a class="link" href="#_install_golang_1_17">Install golang (1.17+)</a></h5>
<div class="paragraph">
<p>The zot project requires <code>golang 1.17</code> or newer. You can follow
<a href="https://go.dev/learn/">these instructions</a> to install the <code>golang</code> toolchain.  After installation, make sure that the <code>path</code> environment variable or your IDE can find the toolchain.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_building_an_executable_binary_from_source"><a class="anchor" href="#_building_an_executable_binary_from_source"></a><a class="link" href="#_building_an_executable_binary_from_source">Building an executable binary from source</a></h4>
<div class="paragraph">
<p>Download or clone the full zot project from GitHub at <a href="https://github.com/project-zot/zot">project-zot</a>. To clone the zot project from GitHub, use this command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>git clone https://github.com/project-zot/zot.git</pre>
</div>
</div>
<div class="paragraph">
<p>To build zot, execute the <code>make</code> command in the zot directory using the following general syntax:</p>
</div>
<div class="paragraph">
<p><code>make OS=<em>os</em> ARCH=<em>architecture</em> {binary | binary-minimal}</code></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The operating system and architecture options are listed in the  <a href="#supported-platforms-and-architectures-table-zot">Supported platforms and architectures</a> table. If an option is not specified, the defaults are <code>linux</code> and <code>amd64</code>.</p>
</li>
<li>
<p>The <code>binary</code> option builds the full zot binary image with all extensions.</p>
</li>
<li>
<p>The <code>binary-minimal</code> option builds the minimal distribution-spec conformant zot binary image without extensions, reducing the attack surface.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>For example, to build a zot image with extensions for an Intel-based linux server, use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>make OS=linux ARCH=amd64 binary</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>make</code> command builds an executable image in the <code>zot/bin</code> directory. The original filename of the zot executable image will indicate the build options. For example, the filename of an Intel-based linux minimal image is <code>zot-linux-amd64-minimal</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For convenience, you can rename the binary image file to simply <code>zot</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_building_a_zot_container_image_from_source"><a class="anchor" href="#_building_a_zot_container_image_from_source"></a><a class="link" href="#_building_a_zot_container_image_from_source">Building a zot container image from source</a></h4>
<div class="paragraph">
<div class="title">with Stacker</div>
<p>Using the settings in stacker.yaml, you can build a container image that runs the latest zot by running the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>make binary-stacker</pre>
</div>
</div>
<div class="paragraph">
<div class="title">with Docker</div>
<p>A sample Dockerfile is provided on the <a href="https://github.com/project-zot/zot/blob/main/Dockerfile">zot project page</a> in GitHub. You can edit the sample file with your specific values, such as the desired operating system, hardware architecture, and full or minimal build, as in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ARG OS=linux
ARG ARCH=amd64

RUN make COMMIT=$COMMIT OS=$OS ARCH=$ARCH clean binary-minimal</pre>
</div>
</div>
<div class="paragraph">
<p>Using your edited Dockerfile, you can build a container image that runs the latest zot by running the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>make image</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_deploying_the_container_image"><a class="anchor" href="#_deploying_the_container_image"></a><a class="link" href="#_deploying_the_container_image">Deploying the container image</a></h4>
<div class="paragraph">
<p>Deploy the image using your container manager, such as Podman, runc, Helm, or Docker, as in these examples:</p>
</div>
<div class="listingblock">
<div class="title">with Podman</div>
<div class="content">
<pre>podman run --rm -it -p 5000:5000 -v $(pwd)/registry:/var/lib/registry zot:latest</pre>
</div>
</div>
<div class="listingblock">
<div class="title">with Docker</div>
<div class="content">
<pre>docker run --rm -it -p 5000:5000 -v $(pwd)/registry:/var/lib/registry zot:latest</pre>
</div>
</div>
<div class="paragraph">
<p>A container image built with the sample Dockerfile and deployed with the example command results in a running registry at <code><a href="http://localhost:5000" class="bare">http://localhost:5000</a></code>.  Registry content is stored at <code>.registry</code>, which is bind mounted to <code>/var/lib/registry</code> in the container. By default, auth is disabled.  As part of the build, a YAML configuration file is created at <code>/etc/zot/config.yml</code> in the container.</p>
</div>
<div class="paragraph">
<p>You can override the configuration file with custom configuration settings in the deployment command and in a local configuration file as shown in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>podman run --rm -p 8080:8080 \
  -v $(pwd)/custom-config.yml:/etc/zot/config.yml \
  -v $(pwd)/registry:/tmp/zot \
  zot:latest</pre>
</div>
</div>
<div class="paragraph">
<p>This command causes the registry to listen on port 8080 and to use <code>/tmp/zot</code> for content storage.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_additional_recommended_steps"><a class="anchor" href="#_additional_recommended_steps"></a><a class="link" href="#_additional_recommended_steps">Additional recommended steps</a></h3>
<div class="paragraph">
<p>We recommend that, when deploying zot, you also install the command
line (<a href="#_zli_chapter">zli</a>) and benchmarking (<a href="#_zb_chapter">zb</a>) packages.</p>
</div>
</div>
<div class="sect2">
<h3 id="_launching_zot"><a class="anchor" href="#_launching_zot"></a><a class="link" href="#_launching_zot">Launching zot</a></h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The instructions and examples in this guide use <code>zot</code> as the name of the
zot executable file and do not include the path to the
executable file.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The zot service is initiated with the <code>zot serve</code> command followed by
the name of a configuration file.</p>
</div>
<div class="paragraph">
<p>The configuration file is a JSON or YAML file that contains all configuration
settings for zot functions. Using the information in this guide, you
can compose a configuration file with the settings and features you require for
your zot registry server.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Before launching zot, you can check your configuration file
for errors or conflicts using the procedure described in
<a href="#_verifying_config">Verifying the configuration file</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When ready, you can launch zot using the following command:</p>
</div>
<div class="paragraph">
<p><code><strong>zot</strong> <strong>serve</strong> <em>configfile</em></code></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_the_command_line_interface_zli"><a class="anchor" href="#_using_the_command_line_interface_zli"></a><a class="link" href="#_using_the_command_line_interface_zli">Using the command line interface (zli)</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_zli_chapter"><a class="anchor" href="#_zli_chapter"></a><a class="link" href="#_zli_chapter">What is zli?</a></h3>
<div class="paragraph">
<p>zli is a binary that implements a set of command line commands for interacting
with the zot registry server.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
We recommend installing zli when you install zot.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_get_zli"><a class="anchor" href="#_how_to_get_zli"></a><a class="link" href="#_how_to_get_zli">How to get zli</a></h3>
<div class="paragraph">
<p>zli is hosted with zot on GitHub at
<a href="https://github.com/project-zot/zot">project-zot</a>.
From GitHub, you can download the zli binary or you can build zli from the source.</p>
</div>
<div class="sect3">
<h4 id="_supported_platforms_2"><a class="anchor" href="#_supported_platforms_2"></a><a class="link" href="#_supported_platforms_2">Supported platforms</a></h4>
<div class="paragraph">
<p>zli is supported for the following operating systems and platform architectures:</p>
</div>
<table id="supported-platforms-and-architectures-table-zli" class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 2. Supported platforms and architectures</caption>
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">OS</th>
<th class="tableblock halign-left valign-top">ARCH</th>
<th class="tableblock halign-left valign-top">Platform</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">linux</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">amd64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intel-based Linux servers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">linux</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">arm64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ARM-based servers and Raspberry Pi4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">darwin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">amd64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intel-based MacOS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">darwin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">arm64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ARM-based MacOS</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_downloading_zli_binaries"><a class="anchor" href="#_downloading_zli_binaries"></a><a class="link" href="#_downloading_zli_binaries">Downloading zli binaries</a></h4>
<div class="paragraph">
<p>You can download the executable binary for your server platform and architecture
under "Assets" on the GitHub
<a href="https://github.com/project-zot/zot/releases">zot releases</a> page.</p>
</div>
<div class="paragraph">
<p>The binary image is named using the platform and architecture from the
 <a href="#supported-platforms-and-architectures-table-zli">Supported platforms and architectures</a>
 table.  For example, the binary for an Intel-based MacOS server is
 <code>zli-darwin-amd64.</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_building_zli_from_source"><a class="anchor" href="#_building_zli_from_source"></a><a class="link" href="#_building_zli_from_source">Building zli from source</a></h4>
<div class="paragraph">
<p>To build the zli binary, copy or clone the zot project from GitHub
and execute the <code>make cli</code> command in the <code>zot</code> directory.
Use the same command options that you used to build zot, as shown:</p>
</div>
<div class="paragraph">
<p><code>make OS=<em>os</em> ARCH=<em>architecture</em> cli</code></p>
</div>
<div class="paragraph">
<p>For example, the following command builds zli for an Intel-based MacOS server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>make OS=darwin ARCH=amd64 cli</pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the resulting executable file is <code>zli-darwin-amd64</code> in the
<code>zot/bin</code> directory.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_common_tasks_using_zli"><a class="anchor" href="#_common_tasks_using_zli"></a><a class="link" href="#_common_tasks_using_zli">Common tasks using zli</a></h3>
<div class="paragraph">
<p>This section includes examples of common zot server tasks using the zli
command line interface. For a detailed listing of zli commands, see the
<a href="#_zli-command-reference">zli Command Reference</a> in this guide.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The instructions and examples in this guide use <code>zli</code> as the name of the executable file.</p>
</div>
<div class="paragraph">
<p>The original filename of the executable file will reflect the build options, such as
<code>zli-linux-amd64</code>. For convenience, you can rename the executable to simply <code>zli</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_adding_a_zot_server_url"><a class="anchor" href="#_adding_a_zot_server_url"></a><a class="link" href="#_adding_a_zot_server_url">Adding a zot server URL</a></h4>
<div class="paragraph">
<p>You can modify the zot server configuration using the <a href="#_zli-config"><code>zli config add</code></a> command.
This example adds a zot server URL with an alias of <code>remote-zot</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>bin/zli config add remote-zot https://server-example:8080</pre>
</div>
</div>
<div class="paragraph">
<p>Use the <a href="#_zli-config"><code>zli config</code></a> command to list all configured URLs with their aliases:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bin/zli config -l

remote-zot   https://server-example:8080
local        http://localhost:8080</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_listing_images"><a class="anchor" href="#_listing_images"></a><a class="link" href="#_listing_images">Listing images</a></h4>
<div class="paragraph">
<p>You can list all images hosted on a zot server using the <a href="#_zli-images"><code>zli images</code></a> command with
the server&#8217;s alias:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bin/zli images remote-zot

IMAGE NAME        TAG               DIGEST    SIZE
postgres          9.6.18-alpine     ef27f3e1  14.4MB
postgres          9.5-alpine        264450a7  14.4MB
busybox           latest            414aeb86  707.8KB</pre>
</div>
</div>
<div class="paragraph">
<p>You can also filter the image list to view a specific image by specifying the
image name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bin/zli images remote-zot -n busybox

IMAGE NAME        TAG               DIGEST    SIZE
busybox           latest            414aeb86  707.8KB</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_scanning_images_for_known_vulnerabilities"><a class="anchor" href="#_scanning_images_for_known_vulnerabilities"></a><a class="link" href="#_scanning_images_for_known_vulnerabilities">Scanning images for known vulnerabilities</a></h4>
<div class="paragraph">
<p>Using the <a href="#_zli-cve"><code>zli cve</code></a> command, you can fetch the CVE (Common Vulnerabilities and
Exposures) information for images hosted on the zot server. This example shows
how to learn which images are affected by a specific CVE:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bin/zli cve remote-zot -i CVE-2017-9935

IMAGE NAME        TAG               DIGEST    SIZE
c3/openjdk-dev    commit-5be4d92    ac3762e2  335MB</pre>
</div>
</div>
<div class="paragraph">
<p>This example displays a list all CVEs affecting a specific image:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bin/zli cve remote-zot -I c3/openjdk-dev:0.3.19

ID                SEVERITY  TITLE
CVE-2015-8540     LOW       libpng: underflow read in png_check_keyword()
CVE-2017-16826    LOW       binutils: Invalid memory access in the coff_s...</pre>
</div>
</div>
<div class="paragraph">
<p>This example displays the detailed CVEs in JSON format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bin/zli cve remote-zot -I c3/openjdk-dev:0.3.19 -o json
{
  "Tag": "0.3.19",
  "CVEList": [
    {
      "Id": "CVE-2019-17006",
      "Severity": "MEDIUM",
      "Title": "nss: Check length of inputs for cryptographic primitives",
      "Description": "A vulnerability was discovered in nss where input text length was not checked when using certain cryptographic primitives. This could lead to a heap-buffer overflow resulting in a crash and data leak. The highest threat is to confidentiality and integrity of data as well as system availability.",
      "PackageList": [
        {
          "Name": "nss",
          "InstalledVersion": "3.44.0-7.el7_7",
          "FixedVersion": "Not Specified"
        },
        {
          "Name": "nss-sysinit",
          "InstalledVersion": "3.44.0-7.el7_7",
          "FixedVersion": "Not Specified"
        },
        {
          "Name": "nss-tools",
          "InstalledVersion": "3.44.0-7.el7_7",
          "FixedVersion": "Not Specified"
        }]
    }]
}</pre>
</div>
</div>
<div class="paragraph">
<p>This example lists all images on a specific zot server that are affected by
a specific CVE:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bin/zli cve remote-zot -I c3/openjdk-dev -i CVE-2017-9935

IMAGE NAME        TAG               DIGEST    SIZE
c3/openjdk-dev    commit-2674e8a    71046748  338MB
c3/openjdk-dev    commit-bd5cc94    0ab7fc76</pre>
</div>
</div>
<div class="paragraph">
<p>This example lists all images on a specific zot server where the CVE has been fixed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bin/zli cve remote-zot -I c3/openjdk-dev -i CVE-2017-9935 --fixed

IMAGE NAME        TAG                       DIGEST    SIZE
c3/openjdk-dev    commit-2674e8a-squashfs   b545b8ba  321MB
c3/openjdk-dev    commit-d5024ec-squashfs   cd45f8cf  321MB</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_listing_repositories"><a class="anchor" href="#_listing_repositories"></a><a class="link" href="#_listing_repositories">Listing repositories</a></h4>
<div class="paragraph">
<p>You can list all repositories hosted on a zot server using the <a href="#_zli-repos"><code>zli repos</code></a> command with
the server&#8217;s alias:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Searching... 🌍

REPOSITORY NAME
alpine
busybox</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_zot"><a class="anchor" href="#_configuring_zot"></a><a class="link" href="#_configuring_zot">Configuring zot</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_config_file"><a class="anchor" href="#_config_file"></a><a class="link" href="#_config_file">Configuration file</a></h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The instructions and examples in this guide use <code>zot</code> as the name of the
zot executable file. The examples do not include the path to the
executable file.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The zot service is initiated with the <code>zot serve</code> command followed by
the name of a configuration file. The configuration file is a JSON or YAML file
that contains all configuration settings for zot functions such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>network</p>
</li>
<li>
<p>storage</p>
</li>
<li>
<p>authentication</p>
</li>
<li>
<p>authorization</p>
</li>
<li>
<p>logging</p>
</li>
<li>
<p>metrics</p>
</li>
<li>
<p>synchronization with other registries</p>
</li>
<li>
<p>clustering</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A simple JSON configuration file is shown in the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "distSpecVersion": "1.0.1",
    "storage": {
        "rootDirectory": "/tmp/zot"
    },
    "http": {
        "address": "127.0.0.1",
        "port": "8080"
    },
    "log": {
        "level": "debug"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The configuration file contains the distribution specification version
(<code>distSpecVersion</code>). The structure and content of other attributes are described
in the later sections of this guide.</p>
</div>
<div class="paragraph">
<p>Using the information in this guide, you can compose a configuration file with the
settings and features you require for your zot registry server.</p>
</div>
<div class="sect3">
<h4 id="_extensions"><a class="anchor" href="#_extensions"></a><a class="link" href="#_extensions">Extension features</a></h4>
<div class="paragraph">
<p>With a full zot image, additional extension features can be enabled and
configured under an <code>extensions</code> attribute in the configuration file as shown in
the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  ...
  "extensions": {
    "metrics": {},
    "sync": {},
    "search": {},
    "scrub": {}
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The extension features are available only with a full zot image.
With a minimal zot image, the <code>extensions</code> section is ignored if present.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following features are configured under the <code>extensions</code> attribute.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#_metrics_config">Metrics</a></p>
</li>
<li>
<p><a href="#_sync_config">Sync</a></p>
</li>
<li>
<p><a href="#_search_config">Search</a></p>
</li>
<li>
<p><a href="#_scrub_config">Scrub</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An extension feature is enabled by the presence of the feature&#8217;s attribute
under <code>extensions</code>. An extension feature can be disabled by omitting the feature
attribute or by including an <code>enable</code> attribute with a value of <code>false</code>.</p>
</div>
<div class="paragraph">
<p>For example, the scrub feature is enabled in the following cases.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"extensions": {
  "scrub": {}
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"extensions": {
  "scrub": {
    "enable": true
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The scrub feature is disabled in the following cases.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"extensions": {
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"extensions": {
  "scrub": {
    "enable": false
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_verifying_config"><a class="anchor" href="#_verifying_config"></a><a class="link" href="#_verifying_config">Verifying the configuration file</a></h4>
<div class="paragraph">
<p>Before launching zot, verify the syntax of your configuration file
using the following command:</p>
</div>
<div class="paragraph">
<p><code><strong>zot</strong> <strong>verify</strong> <em>configfile</em></code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Verifying the configuration file protects against operator errors and any
conflicts arising from zot release version changes.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>After verifying your configuration file, you can launch zot with the
following command:</p>
</div>
<div class="paragraph">
<p><code><strong>zot</strong> <strong>serve</strong> <em>configfile</em></code></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_network_config"><a class="anchor" href="#_network_config"></a><a class="link" href="#_network_config">Network configuration</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use the <code>http</code> attribute in the configuration file to configure the zot
network settings, as shown in the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"http": {
  "address":"127.0.0.1",
  "port":"8080",
  "realm":"zot",
  "tls": {
    "cert":"test/data/server.cert",
    "key":"test/data/server.key"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following table lists the configurable attributes.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>address</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IP address of the zot server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>port</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port number of the zot server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>realm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The security policy domain defined for the server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tls</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The included attributes in this section specify the Transport Layer
Security (TLS) settings for the server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path and filename of the server&#8217;s SSL/TLS certificate.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path and filename of the server&#8217;s registry key.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_storage_configuration"><a class="anchor" href="#_storage_configuration"></a><a class="link" href="#_storage_configuration">Storage configuration</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_storage_config"><a class="anchor" href="#_storage_config"></a><a class="link" href="#_storage_config">Storage options</a></h3>
<div class="paragraph">
<p>With zot, you have the option to store your registry image files either
in local filesystem storage or in cloud storage, such as an Amazon Simple Storage
Service (S3) bucket.</p>
</div>
</div>
<div class="sect2">
<h3 id="_local_storage_config"><a class="anchor" href="#_local_storage_config"></a><a class="link" href="#_local_storage_config">Configuring local storage</a></h3>
<div class="paragraph">
<p>Local filesystem storage for zot is configured with the <code>storage</code>
attribute in the configuration file, as shown in the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"storage":{
  "rootDirectory":"/tmp/zot",
  "commit": true,
  "dedupe": true,
  "gc": true,
  "gcDelay": "1h",
  "gcInterval": "24h"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following table lists the configurable attributes.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rootDirectory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location  of the images stored in the server file system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>commit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For faster performance, data written by zot is retained in memory before
being periodically committed to disk by the operating system. To eliminate this
retention time and cause data to be written to disk immediately, set to <code>true</code>.
This prevents data loss but reduces performance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dedupe</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the server filesystem supports hard links, you can optimize storage space by enabling
inline deduplication of layers and blobs that are shared among multiple container images.
Deduplication is enabled by default. Set to <code>false</code> to disable deduplication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When an image is deleted, either by tag or by reference, orphaned blobs
can lead to wasted storage. Garbage collection (gc) is enabled by default
to reclaim this space. Set to <code>false</code> to disable garbage collection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gcDelay</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) If garbage collection is enabled, causes it to run once after the specified delay time. The default is 1 hour.
Requires the <code>gc</code> attribute to be <code>true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gcInterval</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) If garbage collection is enabled, causes periodic collection at the specified interval. Must be set based on use cases and user workloads. If no value is specified, there is no periodic collection.
Requires the <code>gc</code> attribute to be <code>true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>subpaths</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>You can store and serve images from multiple filesystems, each with
their own repository paths and settings. The following example shows three subpaths.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"storage":{
  "subPaths": {
    "/a": {
      "rootDirectory": "/tmp/zot1",
      "dedupe": true,
      "gc": true
    },
    "/b": {
      "rootDirectory": "/tmp/zot2",
      "dedupe": true
    },
    "/c": {
      "rootDirectory": "/tmp/zot3",
      "dedupe": false
    }
  }
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_s3_storage_config"><a class="anchor" href="#_s3_storage_config"></a><a class="link" href="#_s3_storage_config">Configuring S3 storage</a></h3>
<div class="paragraph">
<p>Amazon Simple Storage Service (S3) for zot can be configured with the
<code>storageDriver</code> attribute in the configuration file, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"storageDriver": {
    "name": "s3",
    "region": "us-east-2",
    "bucket": "zot-storage",
    "secure": true,
    "skipverify": false,
    "accesskey": "&lt;YOUR_ACCESS_KEY_ID&gt;",
    "secretkey": "&lt;YOUR_SECRET_ACCESS_KEY&gt;"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As in the case with local filesystem storage, you can use multiple storage
locations using the <code>subpath</code> attribute, as in the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"subPaths": {
    "/a": {
        "rootDirectory": "/zot-a",
        "storageDriver": {
            "name": "s3",
            "region": "us-east-2",
            "bucket": "zot-storage",
            "secure": true,
            "skipverify": false
        }
    },
    "/b": {

...

    }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_s3_credentials"><a class="anchor" href="#_s3_credentials"></a><a class="link" href="#_s3_credentials">S3 Credentials</a></h4>
<div class="paragraph">
<p>In the first configuration file example, the S3 credentials were configured with the
attributes <code>accesskey</code> and <code>secretkey.</code> As an alternative, you can omit these attributes
from the configuration file and you can configure them using environment variables or a
credential file.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Environment variables</p>
<div class="paragraph">
<p>Zot looks for credentials in the following environment variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>AWS_ACCESS_KEY_ID
AWS_SECRET_ACCESS_KEY
AWS_SESSION_TOKEN (optional)</pre>
</div>
</div>
</li>
<li>
<p>Credential file</p>
<div class="paragraph">
<p>A credential file is a plaintext file that contains your access keys, as shown in
the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[default]
aws_access_key_id = &lt;YOUR_DEFAULT_ACCESS_KEY_ID&gt;
aws_secret_access_key = &lt;YOUR_DEFAULT_SECRET_ACCESS_KEY&gt;

[test-account]
aws_access_key_id = &lt;YOUR_TEST_ACCESS_KEY_ID&gt;
aws_secret_access_key = &lt;YOUR_TEST_SECRET_ACCESS_KEY&gt;

[prod-account]
; work profile
aws_access_key_id = &lt;YOUR_PROD_ACCESS_KEY_ID&gt;
aws_secret_access_key = &lt;YOUR_PROD_SECRET_ACCESS_KEY&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>[default]</code> heading defines credentials for the default profile, which zot
will use unless you configure it to use another profile.  You can specify a profile using the
<code>AWS_PROFILE</code> environment variable as in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>AWS_PROFILE=test-account</pre>
</div>
</div>
<div class="paragraph">
<p>The credential file must be named <code>credentials.</code> The file must be located in the
<code>.aws/</code> folder in the home directory of the same server that is running your zot
application.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more details about specifying S3 credentials, see the
<a href="https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/configuring-sdk.html#specifying-credentials">AWS documentation</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_security_and_hardening"><a class="anchor" href="#_security_and_hardening"></a><a class="link" href="#_security_and_hardening">Security and hardening</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_authentication"><a class="anchor" href="#_authentication"></a><a class="link" href="#_authentication">Authentication</a></h3>
<div class="paragraph">
<p>Zot supports authentication by the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>TLS mutual authentication</p>
</li>
<li>
<p>Basic local authentication using an htpasswd file</p>
</li>
<li>
<p>LDAP authentication</p>
</li>
<li>
<p>Bearer (OAuth2) authentication using an HTTP Bearer token</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For detailed information about configuring authentication for your <code>zot</code> registry, see <a href="../kb/authn-authz.html" class="xref page">User Authentication and Authorization with zot</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_identity_based_authorization"><a class="anchor" href="#_identity_based_authorization"></a><a class="link" href="#_identity_based_authorization">Identity-based authorization</a></h3>
<div class="paragraph">
<p>User identity can be used as an authorization criterion for allowing actions on one or more repository paths.  For specific users, you can choose to allow any combination of read, create, update, or delete actions on specific repository paths.</p>
</div>
<div class="paragraph">
<p>For detailed information about configuring access control policies for your <code>zot</code> registry, see <a href="../kb/authn-authz.html" class="xref page">User Authentication and Authorization with zot</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_failure_delay"><a class="anchor" href="#_failure_delay"></a><a class="link" href="#_failure_delay">Preventing automated attacks with failure delay</a></h3>
<div class="paragraph">
<p>Use the <code>auth</code> and <code>failDelay</code> attributes under <code>http</code> in the configuration file
to delay the response to an authentication failure. A delayed response helps to
prevent automated attacks. The configuration is shown in the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"http": {
  "auth": {
    "failDelay": 5
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>failDelay</code> attribute specifies a waiting time, in seconds, before zot
sends a failure notification to an authenticating user who has been denied access.</p>
</div>
</div>
<div class="sect2">
<h3 id="_rate_limiting"><a class="anchor" href="#_rate_limiting"></a><a class="link" href="#_rate_limiting">Rate limiting</a></h3>
<div class="paragraph">
<p>You can limit the rate of API calls from users by configuring the <code>Ratelimit</code>
attribute in the configuration file, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"http": {
    "address": "127.0.0.1",
    "port": "8080",
    "Ratelimit": {
        "Rate": 10,
        "Methods": [
            {
                "Method": "GET",
                "Rate": 5
            }
        ]
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the <code>Rate</code> attribute directly under <code>Ratelimit</code> sets a global
rate limit of ten API calls per second. You can optionally override the global limit for
specific API <code>Methods</code>. In this example, API <code>GET</code> calls are limited to five per second.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_syncing_and_mirroring_registries"><a class="anchor" href="#_syncing_and_mirroring_registries"></a><a class="link" href="#_syncing_and_mirroring_registries">Syncing and mirroring registries</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_sync_registries"><a class="anchor" href="#_sync_registries"></a><a class="link" href="#_sync_registries">Synchronizing registries</a></h3>
<div class="paragraph">
<p>Add the <code>sync</code> attribute under <code>extensions</code> in the configuration file to enable
and configure the periodic or on-demand synchronization of your zot
image registry with other image registries, as shown in the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"extensions": {
    "sync": {
        "enable": true,
        "credentialsFile": "./examples/sync-auth-filepath.json",
        "registries": [
        {
            "urls": [
                "https://registry1:5000"
            ],
            "onDemand": false,
            "pollInterval": "6h",
            "tlsVerify": true,
            "certDir": "/home/user/certs",
            "maxRetries": 5,
            "retryDelay": "10m",
            "onlySigned": true,
            "content": [
            {
                "prefix": "/repo1/repo",
                "tags":
                {
                    "regex": "4.*",
                    "semver": true
                }
            },
            {
                "prefix": "/repo1/repo",
                "destination": "/localrepo",
                "stripPrefix": true
            },
            {
                "prefix": "/repo1/**",
                "destination": "/localrepo",
                "stripPrefix": true
            },
            {
                "prefix": "/repo2/repo*"
            },
            {
                "prefix": "/repo3/**"
            }]
        },
        {
            "urls": [
                "https://registry2:5000",
                "https://registry3:5000"
            ],
            "pollInterval": "12h",
            "tlsVerify": false,
            "onDemand": false,
            "content": [
            {
                "prefix": "/repo2",
                "tags":
                {
                    "semver": true
                }
            }]
        },
        {
            "urls": [
                "https://docker.io/library"
            ],
            "onDemand": true,
            "tlsVerify": true,
            "maxRetries": 6,
            "retryDelay": "5m"
        }]
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following table lists the configurable attributes for registry synchronization.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>enable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this attribute is missing, registry synchronization is enabled by default.
Registry synchronization can be disabled by setting this attribute to <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>credentialsFile</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location of a local credentials file containing credentials for other registries.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>urls</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The URL of an upstream image registry.  You can specify a comma-separated list of
multiple URLs for the same registry in case one or more fails.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onDemand</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><code>false</code>: Pull all images not found in the local registry.</p>
</li>
<li>
<p><code>true</code>: Pull any image not found in the local registry only when needed.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pollInterval</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The period in seconds between polling of remote registries.
If no value is specified, no periodic polling will occur.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tlsVerify</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><code>false</code>: TLS will not be verified.</p>
</li>
<li>
<p><code>true</code>: (Default) TLS will be verified.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>certDir</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If a path is specified, use certificates at this path. If no path is
specified, use the default certificates directory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxRetries</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum number of retries if an error occurs during either an
on-demand or periodic synchronization.
If no value is specified, no retries will occur.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>retryDelay</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The interval in seconds between retries.
This attribute is mandatory when maxRetries is configured.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onlySigned</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><code>false</code>: Synchronize signed or unsigned images.</p>
</li>
<li>
<p><code>true</code>: Synchronize only signed images (either notary or cosigned).</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>content</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The included attributes in this section specify which content will be periodically
pulled.
If this section is not populated, periodically polling will not occur.
 The included attributes can also filter which on-demand images are pulled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prefix</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">On the remote server, the path from which images will be pulled. This
path can be a string that exactly matches the remote path, or it can be a <code>glob</code> pattern.
For example, the path can include a wildcard (<strong>*</strong>) or a recursive wildcard (<strong>**</strong>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>destination</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the path under which pulled images are to be stored.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stripPrefix</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies whether the prefix path from the source registry will be
retained or replaced when the image is stored in the [zotLowerName] registry.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>false</code>: Retain the source prefix, append it to the destination path.</p>
</li>
<li>
<p><code>true</code>: Remove the source prefix.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the source prefix was specified with
meta-characters (such as <strong>**</strong>), only the prefix segments that precede the
meta-characters are removed. Any remaining path segments are appended to the
destination path.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The included attributes in this optional section specify how remote
images will be selected for synchronization based on image tags.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>regex</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a regular expression for matching image tags. Images whose tags
do not match the expression are not pulled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>semver</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies whether image tags are to be filtered by
<a href="https://semver.org/">Semantic Versioning</a> (semver)
compliance.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>false</code>: Do not filter by semantic versioning</p>
</li>
<li>
<p><code>true</code>: Filter by semantic versioning</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_monitoring"><a class="anchor" href="#_monitoring"></a><a class="link" href="#_monitoring">Monitoring</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_logging"><a class="anchor" href="#_logging"></a><a class="link" href="#_logging">Logging</a></h3>
<div class="paragraph">
<p>Logging for zot operations is configured with the <code>log</code> attribute in the
configuration file, as shown in the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"log":{
  "level":"debug",
  "output":"/tmp/zot.log",
  "audit": "/tmp/zot-audit.log"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following table lists the configurable attributes.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>level</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The minimum level for logged events. The levels are:<br>
<code>panic,</code> <code>fatal,</code> <code>error,</code> <code>warn,</code> <code>info,</code> <code>debug,</code> and <code>trace.</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>output</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The filesystem path for the log output file. The default is <code>stdout</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>audit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) If a filesystem path is specified for audit logging, an audit log is
enabled and will be stored at the specified path.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_metrics_config"><a class="anchor" href="#_metrics_config"></a><a class="link" href="#_metrics_config">Metrics</a></h3>
<div class="paragraph">
<p>The available methods for collecting metrics varies depending on whether your zot
installation is a minimal (distribution-spec-only) image or a full image including extensions.</p>
</div>
<div class="sect3">
<h4 id="_enabling_metrics_for_a_full_zot_image_with_extensions"><a class="anchor" href="#_enabling_metrics_for_a_full_zot_image_with_extensions"></a><a class="link" href="#_enabling_metrics_for_a_full_zot_image_with_extensions">Enabling metrics for a full zot image with extensions</a></h4>
<div class="paragraph">
<p>Add the <code>metrics</code> attribute under <code>extensions</code> in the configuration file
to enable and configure metrics, as shown in the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"extensions": {
    "metrics": {
        "enable": true,
        "prometheus": {
            "path": "/metrics"
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following table lists the configurable attributes for metrics collection.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>enable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this attribute is missing, metrics collection is enabled by default.
Metrics collection can be disabled by setting this attribute to <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prometheus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attributes under <code>prometheus</code> contain configuration settings for the Prometheus
node exporter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The server path on which metrics will be exposed.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_collecting_metrics_from_a_minimal_zot_image_using_a_node_exporter"><a class="anchor" href="#_collecting_metrics_from_a_minimal_zot_image_using_a_node_exporter"></a><a class="link" href="#_collecting_metrics_from_a_minimal_zot_image_using_a_node_exporter">Collecting metrics from a minimal zot image using a node exporter</a></h4>
<div class="paragraph">
<p>Although a minimal zot image does not contain a node exporter, it
exposes internal metrics in a Prometheus format for collection by a separate
node exporter tool such as zxp. The zot companion binary zxp
is a node exporter that can be deployed with a minimal zot image in
order to scrape metrics from the zot server.</p>
</div>
<div class="paragraph">
<p>Metrics are automatically enabled in the zot server upon first scrape
from the node exporter and the metrics are automatically disabled when the node
exporter has not performed any scraping for some period. No extra zot
configuration is needed for this behavior.</p>
</div>
<div class="paragraph">
<p>You can download the zxp executable binary for your server platform and
architecture under "Assets" on the GitHub
<a href="https://github.com/project-zot/zot/releases">zot releases</a> page.</p>
</div>
<div class="paragraph">
<p>The binary image is named using the target platform and architecture. For example,
the binary for an Intel-based MacOS server is
<code>zxp-darwin-amd64</code>.  To configure the zxp example image, run this command:</p>
</div>
<div class="paragraph">
<p><code><strong>zxp-darwin-amd64</strong> <strong>config</strong> <em>zxp-config-file</em></code></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For convenience, you can rename the binary image file to simply <code>zxp.</code>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
A sample Dockerfile for zxp is available at
<a href="https://github.com/project-zot/zot/blob/main/Dockerfile-zxp">Dockerfile-zxp</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The configuration file of zxp contains connection details for the zot
server from which it will scrape metrics. The following JSON structure is an example
of the <code><em>zxp-config-file</em></code> contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "Server": {
        "protocol": "http",
        "host": "127.0.0.1",
        "port": "8080"
    },
    "Exporter": {
        "port": "8081",
        "log": {
            "level": "debug"
        }
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The zxp module does not have Prometheus integration.</p>
</div>
<div class="paragraph">
<p>The zxp module is not needed with a full zot image.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_zb_chapter"><a class="anchor" href="#_zb_chapter"></a><a class="link" href="#_zb_chapter">Benchmarking zot with zb</a></h3>
<div class="paragraph">
<p>The <a href="https://github.com/project-zot/zot">zot project</a> includes the <code>zb</code> tool, which allows you to benchmark a <code>zot</code> registry or any other container image registry that conforms to the <a href="https://github.com/opencontainers/distribution-spec">OCI Distribution Specification</a> published by the Open Container Initiative (OCI).</p>
</div>
<div class="paragraph">
<p>The <code>zb</code> tool is useful for benchmarking <code>zot</code> registry workloads in scenarios such as the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>comparing configuration changes</p>
</li>
<li>
<p>comparing software versions</p>
</li>
<li>
<p>comparing hardware/deployment environments</p>
</li>
<li>
<p>comparing with other registries</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For detailed information about benchmarking with <code>zb</code>, see <a href="../kb/benchmarking-with-zb.html" class="xref page">Benchmarking zot with zb</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enterprise_wide_zot"><a class="anchor" href="#_enterprise_wide_zot"></a><a class="link" href="#_enterprise_wide_zot">Enterprise-wide zot</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_clustering_zot"><a class="anchor" href="#_clustering_zot"></a><a class="link" href="#_clustering_zot">Clustering zot</a></h3>
<div class="paragraph">
<p>To ensure high-availability of the registry,<code>zot</code> supports a clustering scheme with stateless <code>zot</code> instances/replicas fronted by a loadbalancer and a shared remote backend storage. This scheme allows the registry service to remain available even if a few replicas fail or become unavailable. Loadbalancing across many zot replicas can also increase aggregate network throughput.</p>
</div>
<div class="paragraph">
<p>For detailed information about clustering with <code>zot</code>, see <a href="../kb/clustering.html" class="xref page">zot Clustering</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_maintenance"><a class="anchor" href="#_maintenance"></a><a class="link" href="#_maintenance">Maintenance</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_scrub_config"><a class="anchor" href="#_scrub_config"></a><a class="link" href="#_scrub_config">Scrubbing the image registry</a></h3>
<div class="paragraph">
<p>To check the integrity of the filesystem and the data in the registry, you can schedule
a periodic scrub operation. The scrub process traverses the filesystem, verifying
that all data blocks are readable. While running, the process may slightly reduce the
registry performance.</p>
</div>
<div class="paragraph">
<p>To enable scrubbing, add the <code>scrub</code> attribute under <code>extensions</code> in the
configuration file, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"extensions": {
  "scrub": {
    "enable": true,
    "interval": "24h"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following table lists the configurable attributes for scrubbing the registry.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>enable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this attribute is missing, registry scrubbing is enabled by default.
Scrubbing can be disabled by setting this attribute to <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>interval</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time interval between periodic scrub operations. This value must be at
least two hours (<code>2h</code>).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_search_config"><a class="anchor" href="#_search_config"></a><a class="link" href="#_search_config">Searching and querying images</a></h3>
<div class="paragraph">
<p>While basic searching is always enabled for images in the zot registry,
you can enable enhanced registry searching and filtering using graphQL.</p>
</div>
<div class="paragraph">
<p>Add the <code>search</code> attribute under <code>extensions</code> in the configuration file to enable
and configure the enhanced search extension, as shown in the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"extensions": {
    "search": {
        "enable": true,
        "cve": {
            "updateInterval": "2h"
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following table lists the configurable attributes for enhanced search.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>enable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this attribute is missing, enhanced search is enabled by default.  Enhanced
search can be disabled by setting this attribute to <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cve</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extends enhanced search to allow searching of Common Vulnerabilities and
Exposures (CVE).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>updateInterval</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the interval at which the searchable database of CVE items
is refreshed.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reference"><a class="anchor" href="#_reference"></a><a class="link" href="#_reference">Reference</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_zli-command-reference"><a class="anchor" href="#_zli-command-reference"></a><a class="link" href="#_zli-command-reference">zli Command Reference</a></h3>
<div class="sect3">
<h4 id="_zli"><a class="anchor" href="#_zli"></a><a class="link" href="#_zli">zli</a></h4>
<div class="listingblock">
<div class="content">
<pre>$ bin/zli --help

Usage:
  zli [flags]
  zli [command]

Available Commands:
  completion  Generate the autocompletion script for the specified shell
  config      Configure zot registry parameters for CLI
  cve         Lookup CVEs in images hosted on the zot registry
  help        Help about any command
  images      List images hosted on the zot registry

Flags:
  -h, --help      help for zli
  -v, --version   show the version and exit

Use "zli [command] --help" for more information about a command.</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_zli-completion"><a class="anchor" href="#_zli-completion"></a><a class="link" href="#_zli-completion">zli completion</a></h4>
<div class="paragraph">
<p>This command generates the autocompletion script for <code>zli</code> for the specified shell.
See each sub-command&#8217;s help for details on how to use the generated script.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bin/zli completion --help

Usage:
  zli completion [command]

Available Commands:
  bash        Generate the autocompletion script for bash
  fish        Generate the autocompletion script for fish
  powershell  Generate the autocompletion script for powershell
  zsh         Generate the autocompletion script for zsh

Flags:
  -h, --help   help for completion

Use "zli completion [command] --help" for more information about a command.</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_zli-config"><a class="anchor" href="#_zli-config"></a><a class="link" href="#_zli-config">zli config</a></h4>
<div class="paragraph">
<p>This command modifies and lists modified settings for a running zot registry.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bin/zli config --help

Usage:
  zli config &lt;config-name&gt; [variable] [value] [flags]
  zli config [command]

Examples:
  zli config add main https://zot-foo.com:8080
  zli config main url
  zli config main --list
  zli config --list

Available Commands:
  add         Add configuration for a zot registry

Flags:
  -h, --help    help for config
  -l, --list    List configurations
      --reset   Reset a variable value

Use "zli config [command] --help" for more information about a command.

Useful variables:
  url		zot server URL
  showspinner	show spinner while loading data [true/false]
  verify-tls	enable TLS certificate verification of the server [default: true]</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_zli-cve"><a class="anchor" href="#_zli-cve"></a><a class="link" href="#_zli-cve">zli cve</a></h4>
<div class="paragraph">
<p>This command lists CVEs (Common Vulnerabilities and Exposures) of images hosted
on the zot registry</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ./zli cve --help

Usage:
  zli cve [config-name] [flags]

Flags:
  -i, --cve-id string   List images affected by a CVE
      --fixed           List tags which have fixed a CVE
  -h, --help            help for cve
  -I, --image string    List CVEs by IMAGENAME[:TAG]
  -o, --output string   Specify output format [text/json/yaml]. JSON and YAML format return all info for CVEs
      --url string      Specify zot server URL if config-name is not mentioned
  -u, --user string     User Credentials of zot server in USERNAME:PASSWORD format</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_zli-images"><a class="anchor" href="#_zli-images"></a><a class="link" href="#_zli-images">zli images</a></h4>
<div class="paragraph">
<p>This command lists images hosted on the zot registry.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ./zli images --help

Usage:
  zli images [config-name] [flags]

Flags:
  -d, --digest string   List images containing a specific manifest, config, or layer digest
  -h, --help            help for images
  -n, --name string     List image details by name
  -o, --output string   Specify output format [text/json/yaml]
      --url string      Specify zot server URL if config-name is not mentioned
  -u, --user string     User Credentials of zot server in "username:password" format
      --verbose         Show verbose output

Run 'zli config -h' for details on [config-name] argument</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_zli-repos"><a class="anchor" href="#_zli-repos"></a><a class="link" href="#_zli-repos">zli repos</a></h4>
<div class="paragraph">
<p>This command lists all repositories in the zot registry.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ./zli repos --help

Usage:
  zli repos [config-name] [flags]

Flags:
  -h, --help          help for repos
      --url string    Specify zot server URL if config-name is not mentioned
  -u, --user string   User Credentials of zot server in "username:password" format

Run 'zli config -h' for details on [config-name] argument</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_notices"><a class="anchor" href="#_notices"></a><a class="link" href="#_notices">Notices</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_bias_free_language"><a class="anchor" href="#_bias_free_language"></a><a class="link" href="#_bias_free_language">Bias-Free language</a></h3>
<div class="paragraph">
<p>The documentation set for this project strives to use bias-free language. For the
purposes of this documentation set, bias-free is defined as language that does
not imply discrimination based on age, disability, gender, racial identity, ethnic
identity, sexual orientation, socioeconomic status, and intersectionality.
Exceptions may be present in the documentation due to language that is hardcoded
in the user interfaces of the project software, language used based on RFP
documentation, or language that is used by a referenced third-party product.</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
